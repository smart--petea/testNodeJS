var sessions = require('sessions'),
	path = require('path'),
	fs = require('fs'),
	_ = require('underscore'),
	sessions = require('sessions');

var indexHtml = path.join(__dirname, "../html/index.html");

/* exports */
module.exports.process = function(req, res) {
	throwIndexHtml(req, res);
}

/* functions */
function throwIndexHtml(req, res) {
	fs.readFile(indexHtml, {encoding: 'utf8'}, function(err, content) {
		if(err) throw err;
		
		var login = sessions.get(req, 'login');
		content = _.template(content, {login: login});

		res.statusCode = 200;
		res.end(content);
	});
}
